<!DOCTYPE html>
<html lang="en-gb">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="alternate" type="application/rss+xml" title="RSS" href="https://robinthrift.com/index.xml">
    <meta content="" name="keywords">
    <meta content="Error Handling in Swift? - Robin Thrift" property="og:title">
    <title>Error Handling in Swift? | Robin Thrift</title>
    <link rel="stylesheet" href="https://robinthrift.com/css/style.css">
</head>


<body class="antialiased text-slate-500 dark:text-slate-300 bg-white dark:bg-slate-950">
    <div class="container py-4 mb-10 mt-10">  
    <nav class="flex">
        <a class="flex-auto text-3xl text-inherit" href="https://robinthrift.com/"><h1>Robin Thrift</h1></a>
        <nav class="flex">
            
            <a class="text-inherit px-2 last:pe-0 first:ps-0" href="https://github.com/RobinThrift">
                <svg
                    width="24"
                    height="24"
                    aria-label="github"
                >
                    <use xlink:href="/img/social.map.svg#github"/>
                </svg>
            </a>
            
            <a class="text-inherit px-2 last:pe-0 first:ps-0" href="https://hachyderm.io/@RobinThrift">
                <svg
                    width="24"
                    height="24"
                    aria-label="mastodon"
                >
                    <use xlink:href="/img/social.map.svg#mastodon"/>
                </svg>
            </a>
            
            <a class="text-inherit px-2 last:pe-0 first:ps-0" href="/index.xml">
                <svg
                    width="24"
                    height="24"
                    aria-label="rss"
                >
                    <use xlink:href="/img/social.map.svg#rss"/>
                </svg>
            </a>
            
        </nav>
    </nav>
</div>

    <main class="container">
        <time class="text-sm text-slate-600 dark:text-slate-400">July 3, 2017</time>
        <h1 class="text-2xl mb-2 dark:text-slate-300">Error Handling in Swift?</h1>
        
        <div>
    
        <a class="text-sm text-slate-600 dark:text-slate-500 underline px-3 first:px-0 hover:text-blue-900" href="/tags/swift">swift</a>
    
</div>

        
        <article class="prose dark:prose-invert max-w-none mt-4">
            <p>I&rsquo;ve been writing a lot of Swift recently, both for iOS and macOS (maybe some server side Linux stuff in future too). Whenever you learn a new language you initially take some idioms from other languages with you. I am primarily a JavaScript developer, where, due to the nature of things, most operations are asynchronous, so they are wrapped in promises. Error handling in this case is mostly handled in anonymous functions where the first parameter is the error object:</p>
<div class="highlight"><pre tabindex="0" style="color:#ef9f76;background-color:#303446;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">1</span><span><span style="color:#babbf1">fs</span><span style="color:#c6d0f5">.</span><span style="color:#babbf1">readFile</span><span style="color:#c6d0f5">(</span><span style="color:#a6d189">&#39;some/file.ext&#39;</span><span style="color:#c6d0f5">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">2</span><span>    <span style="color:#c6d0f5">.</span><span style="color:#babbf1">then</span><span style="color:#c6d0f5">((</span><span style="color:#babbf1">content</span><span style="color:#c6d0f5">)</span> <span style="color:#c6d0f5">=&gt;</span> <span style="color:#c6d0f5">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">3</span><span>        <span style="color:#626880;font-style:italic">// do something with the content...
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">4</span><span><span style="color:#626880;font-style:italic"></span>    <span style="color:#c6d0f5">})</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">5</span><span>    <span style="color:#c6d0f5">.</span><span style="color:#ca9ee6">catch</span><span style="color:#c6d0f5">((</span><span style="color:#babbf1">error</span><span style="color:#c6d0f5">)</span> <span style="color:#c6d0f5">=&gt;</span> <span style="color:#c6d0f5">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">6</span><span>        <span style="color:#babbf1">console</span><span style="color:#c6d0f5">.</span><span style="color:#babbf1">error</span><span style="color:#c6d0f5">(</span><span style="color:#babbf1">error</span><span style="color:#c6d0f5">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">7</span><span>    <span style="color:#c6d0f5">})</span>
</span></span></code></pre></div><p>Recently though this has changed through the use of <code>async/await</code>. Instead of using the <code>catch</code> callback on a promise we are back to <code>try/catch</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#ef9f76;background-color:#303446;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">1</span><span><span style="color:#ca9ee6">try</span> <span style="color:#c6d0f5">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">2</span><span>    <span style="color:#ca9ee6">let</span> <span style="color:#babbf1">content</span> <span style="color:#99d1db">=</span> <span style="color:#babbf1">fs</span><span style="color:#c6d0f5">.</span><span style="color:#babbf1">readFile</span><span style="color:#c6d0f5">(</span><span style="color:#a6d189">&#39;some/file.ext&#39;</span><span style="color:#c6d0f5">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">3</span><span>    <span style="color:#626880;font-style:italic">// do something with the content...
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">4</span><span><span style="color:#626880;font-style:italic"></span><span style="color:#c6d0f5">}</span> <span style="color:#ca9ee6">catch</span> <span style="color:#c6d0f5">(</span><span style="color:#babbf1">error</span><span style="color:#c6d0f5">)</span> <span style="color:#c6d0f5">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">5</span><span>    <span style="color:#babbf1">console</span><span style="color:#c6d0f5">.</span><span style="color:#babbf1">error</span><span style="color:#c6d0f5">(</span><span style="color:#babbf1">error</span><span style="color:#c6d0f5">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">6</span><span><span style="color:#c6d0f5">}</span>
</span></span></code></pre></div><p>While <code>asnyc/await</code> is amazingly useful, we&rsquo;ve come full circle, back to exceptions like in Java, C# or C++ where I&rsquo;ve seen a lot of code like the following.</p>
<div class="highlight"><pre tabindex="0" style="color:#ef9f76;background-color:#303446;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">1</span><span><span style="color:#ca9ee6">try</span> <span style="color:#99d1db">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">2</span><span>    <span style="color:#babbf1">String</span> <span style="color:#babbf1">contents</span> <span style="color:#99d1db">=</span> <span style="color:#ca9ee6">new</span> <span style="color:#babbf1">File</span><span style="color:#99d1db">(</span><span style="color:#a6d189">&#34;some/file.ext&#34;</span><span style="color:#99d1db">).</span><span style="color:#e5c890">readAll</span><span style="color:#99d1db">()</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">3</span><span><span style="color:#99d1db">}</span> <span style="color:#ca9ee6">catch</span> <span style="color:#99d1db">(</span><span style="color:#babbf1">IOException</span> <span style="color:#babbf1">e</span><span style="color:#99d1db">)</span> <span style="color:#99d1db">{}</span>
</span></span></code></pre></div><p>Or worse, just letting the method throw, bubbling up the call chain.</p>
<p>Having worked with both Go and Rust this felt a little backwards. Go especially used to advertise with the premise that they didn&rsquo;t have any exceptions (there are <a href="https://github.com/golang/go/wiki/PanicAndRecover">panics</a> however). Instead, Go and Rust make error handling a core part of programming, not an &ldquo;exception&rdquo;.
I don&rsquo;t want to go into too much detail about Rust or Go, but here&rsquo;s a very quick recap of how they handle errors.</p>
<p><strong>Rust:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#ef9f76;background-color:#303446;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">1</span><span><span style="color:#626880;font-style:italic">// opened `file` above (error also dealt with using `match`)
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">2</span><span><span style="color:#626880;font-style:italic"></span><span style="color:#ca9ee6">let</span><span style="color:#414559"> </span><span style="color:#ca9ee6">mut</span><span style="color:#414559"> </span><span style="color:#babbf1">s</span><span style="color:#414559"> </span><span style="color:#99d1db">=</span><span style="color:#414559"> </span><span style="color:#c6d0f5;font-style:italic">String</span>::<span style="color:#babbf1">new</span><span style="color:#c6d0f5">();</span><span style="color:#414559">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">3</span><span><span style="color:#414559"></span><span style="color:#ca9ee6">match</span><span style="color:#414559"> </span><span style="color:#babbf1">file</span><span style="color:#c6d0f5">.</span><span style="color:#babbf1">read_to_string</span><span style="color:#c6d0f5">(</span><span style="color:#99d1db">&amp;</span><span style="color:#ca9ee6">mut</span><span style="color:#414559"> </span><span style="color:#babbf1">s</span><span style="color:#c6d0f5">)</span><span style="color:#414559"> </span><span style="color:#c6d0f5">{</span><span style="color:#414559">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">4</span><span><span style="color:#414559">    </span><span style="color:#c6d0f5;font-style:italic">Err</span><span style="color:#c6d0f5">(</span><span style="color:#babbf1">why</span><span style="color:#c6d0f5">)</span><span style="color:#414559"> </span><span style="color:#99d1db">=&gt;</span><span style="color:#414559"> </span><span style="color:#babbf1">panic!</span><span style="color:#c6d0f5">(</span><span style="color:#a6d189">&#34;couldn&#39;t read file: </span><span style="color:#a6d189">{}</span><span style="color:#a6d189">&#34;</span><span style="color:#c6d0f5">,</span><span style="color:#414559"> </span><span style="color:#babbf1">why</span><span style="color:#c6d0f5">.</span><span style="color:#babbf1">description</span><span style="color:#c6d0f5">()),</span><span style="color:#414559">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">5</span><span><span style="color:#414559">    </span><span style="color:#c6d0f5;font-style:italic">Ok</span><span style="color:#c6d0f5">(</span><span style="color:#babbf1">_</span><span style="color:#c6d0f5">)</span><span style="color:#414559"> </span><span style="color:#99d1db">=&gt;</span><span style="color:#414559"> </span><span style="color:#babbf1">print!</span><span style="color:#c6d0f5">(</span><span style="color:#a6d189">&#34;contents:</span><span style="color:#8caaee">\n</span><span style="color:#a6d189">{}</span><span style="color:#a6d189">&#34;</span><span style="color:#c6d0f5">,</span><span style="color:#414559"> </span><span style="color:#babbf1">s</span><span style="color:#c6d0f5">),</span><span style="color:#414559">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">6</span><span><span style="color:#414559"></span><span style="color:#c6d0f5">}</span><span style="color:#414559">
</span></span></span></code></pre></div><p>Rust uses the <a href="https://doc.rust-lang.org/std/result/"><code>Result&lt;T, E&gt;</code></a>-type; an enum that covers the two possible cases of an operation:</p>
<div class="highlight"><pre tabindex="0" style="color:#ef9f76;background-color:#303446;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">1</span><span><span style="color:#ca9ee6">enum</span> <span style="color:#c6d0f5;font-style:italic">Result</span><span style="color:#99d1db">&lt;</span><span style="color:#babbf1">T</span><span style="color:#c6d0f5">,</span><span style="color:#414559"> </span><span style="color:#babbf1">E</span><span style="color:#99d1db">&gt;</span><span style="color:#414559"> </span><span style="color:#c6d0f5">{</span><span style="color:#414559">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">2</span><span><span style="color:#414559">   </span><span style="color:#c6d0f5;font-style:italic">Ok</span><span style="color:#c6d0f5">(</span><span style="color:#babbf1">T</span><span style="color:#c6d0f5">),</span><span style="color:#414559">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">3</span><span><span style="color:#414559">   </span><span style="color:#c6d0f5;font-style:italic">Err</span><span style="color:#c6d0f5">(</span><span style="color:#babbf1">E</span><span style="color:#c6d0f5">),</span><span style="color:#414559">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">4</span><span><span style="color:#414559"></span><span style="color:#c6d0f5">}</span><span style="color:#414559">
</span></span></span></code></pre></div><p><strong>Go:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#ef9f76;background-color:#303446;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">1</span><span><span style="color:#babbf1">dat</span><span style="color:#c6d0f5">,</span> <span style="color:#babbf1">err</span> <span style="color:#99d1db">:=</span> <span style="color:#babbf1">ioutil</span><span style="color:#c6d0f5">.</span><span style="color:#99d1db">ReadFile</span><span style="color:#c6d0f5">(</span><span style="color:#a6d189">&#34;/some/file.ext&#34;</span><span style="color:#c6d0f5">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">2</span><span><span style="color:#ca9ee6">if</span> <span style="color:#babbf1">err</span> <span style="color:#99d1db">!=</span> <span style="color:#ca9ee6;font-style:italic">nil</span> <span style="color:#c6d0f5">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">3</span><span>	<span style="color:#626880;font-style:italic">//...
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">4</span><span><span style="color:#626880;font-style:italic"></span><span style="color:#c6d0f5">}</span>
</span></span></code></pre></div><p>Go uses multiple return parameters to inform the user that a function could return an error. While it may be a little less elegant than Rust&rsquo;s <code>Result</code>-type the error handling is very expressive.</p>
<h3 id="errors-in-swift">Errors in Swift?</h3>
<p>So finally, after we&rsquo;ve set the playing field we get to Swift. Reading about Swift and how much it seemingly took out of the functional (and in turn Rust&rsquo;s) playbook I was excited to see what the Swift team had come up with. Queue my disappointment when I saw the examples and they defaulted to &ldquo;old school&rdquo; <code>try/catch</code>. Seems like a bit of a waste of the type system. So when writing Swift code, especially asynchronous code, I needed a way other than just throwing an error out there, hoping someone would catch it. Maybe it&rsquo;s due to my inexperience with Swift that I did not like the uncertainty of <code>throw</code>ing.</p>
<p>Initially I tried Go-style tuples and destructuring as a kind of &ldquo;fake&rdquo; multiple return parameters. So a function that could fail looked this:</p>
<div class="highlight"><pre tabindex="0" style="color:#ef9f76;background-color:#303446;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-swift" data-lang="swift"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">1</span><span><span style="color:#ca9ee6">func</span> <span style="color:#99d1db">readFile</span><span style="color:#c6d0f5">(</span><span style="color:#babbf1">path</span><span style="color:#c6d0f5">:</span> <span style="color:#c6d0f5;font-style:italic">String</span><span style="color:#c6d0f5">)</span> <span style="color:#c6d0f5">-&gt;</span> <span style="color:#c6d0f5">(</span><span style="color:#c6d0f5;font-style:italic">String</span><span style="color:#c6d0f5">?,</span> <span style="color:#babbf1">Error</span><span style="color:#c6d0f5">?)</span> <span style="color:#c6d0f5">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">2</span><span>    <span style="color:#ca9ee6">do</span> <span style="color:#c6d0f5">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">3</span><span>        <span style="color:#ca9ee6">let</span> <span style="color:#babbf1">content</span> <span style="color:#c6d0f5">=</span> <span style="color:#ca9ee6">try</span> <span style="color:#c6d0f5;font-style:italic">String</span><span style="color:#c6d0f5">(</span><span style="color:#babbf1">contentsOf</span><span style="color:#c6d0f5">:</span> <span style="color:#babbf1">path</span><span style="color:#c6d0f5">,</span> <span style="color:#babbf1">encoding</span><span style="color:#c6d0f5">:</span> <span style="color:#c6d0f5;font-style:italic">String</span><span style="color:#c6d0f5">.</span><span style="color:#babbf1">Encoding</span><span style="color:#c6d0f5">.</span><span style="color:#babbf1">utf8</span><span style="color:#c6d0f5">)</span> 
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">4</span><span>        <span style="color:#ca9ee6">return</span> <span style="color:#c6d0f5">(</span><span style="color:#babbf1">content</span><span style="color:#c6d0f5">,</span> <span style="color:#ca9ee6;font-style:italic">nil</span><span style="color:#c6d0f5">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">5</span><span>    <span style="color:#c6d0f5">}</span> <span style="color:#ca9ee6">catch</span> <span style="color:#c6d0f5">(</span><span style="color:#ca9ee6">let</span> <span style="color:#babbf1">e</span><span style="color:#c6d0f5">)</span> <span style="color:#c6d0f5">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">6</span><span>        <span style="color:#ca9ee6">return</span> <span style="color:#c6d0f5">(</span><span style="color:#ca9ee6;font-style:italic">nil</span><span style="color:#c6d0f5">,</span> <span style="color:#babbf1">e</span><span style="color:#c6d0f5">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">7</span><span>    <span style="color:#c6d0f5">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">8</span><span><span style="color:#c6d0f5">}</span>
</span></span></code></pre></div><p>This worked, and solved my problem, but it meant that everything had to be declared as optional. So instead of using the type system to my advantage, encoding logic in types, I threw away some type safety and convenience. So after a while I decided to switch to Rust-style <code>Result</code>s:</p>
<p>I created my own <code>Result</code>-enum:</p>
<div class="highlight"><pre tabindex="0" style="color:#ef9f76;background-color:#303446;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-swift" data-lang="swift"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">1</span><span><span style="color:#ca9ee6">enum</span> <span style="color:#e5c890">Result</span><span style="color:#c6d0f5">&lt;</span><span style="color:#babbf1">T</span><span style="color:#c6d0f5">&gt;</span> <span style="color:#c6d0f5">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">2</span><span>    <span style="color:#ca9ee6">case</span> <span style="color:#babbf1">Value</span><span style="color:#c6d0f5">(</span><span style="color:#babbf1">T</span><span style="color:#c6d0f5">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">3</span><span>    <span style="color:#ca9ee6">case</span> <span style="color:#babbf1">Error</span><span style="color:#c6d0f5">(</span><span style="color:#babbf1">Error</span><span style="color:#c6d0f5">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">4</span><span><span style="color:#c6d0f5">}</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#ef9f76;background-color:#303446;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-swift" data-lang="swift"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">1</span><span><span style="color:#ca9ee6">func</span> <span style="color:#99d1db">readFile</span><span style="color:#c6d0f5">(</span><span style="color:#babbf1">path</span><span style="color:#c6d0f5">:</span> <span style="color:#c6d0f5;font-style:italic">String</span><span style="color:#c6d0f5">)</span> <span style="color:#c6d0f5">-&gt;</span> <span style="color:#babbf1">Result</span><span style="color:#c6d0f5">&lt;</span><span style="color:#c6d0f5;font-style:italic">String</span><span style="color:#c6d0f5">&gt;</span> <span style="color:#c6d0f5">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">2</span><span>    <span style="color:#ca9ee6">do</span> <span style="color:#c6d0f5">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">3</span><span>        <span style="color:#ca9ee6">let</span> <span style="color:#babbf1">content</span> <span style="color:#c6d0f5">=</span> <span style="color:#ca9ee6">try</span> <span style="color:#c6d0f5;font-style:italic">String</span><span style="color:#c6d0f5">(</span><span style="color:#babbf1">contentsOf</span><span style="color:#c6d0f5">:</span> <span style="color:#babbf1">path</span><span style="color:#c6d0f5">,</span> <span style="color:#babbf1">encoding</span><span style="color:#c6d0f5">:</span> <span style="color:#c6d0f5;font-style:italic">String</span><span style="color:#c6d0f5">.</span><span style="color:#babbf1">Encoding</span><span style="color:#c6d0f5">.</span><span style="color:#babbf1">utf8</span><span style="color:#c6d0f5">)</span> 
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">4</span><span>        <span style="color:#ca9ee6">return</span> <span style="color:#c6d0f5">.</span><span style="color:#babbf1">Value</span><span style="color:#c6d0f5">(</span><span style="color:#babbf1">content</span><span style="color:#c6d0f5">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">5</span><span>    <span style="color:#c6d0f5">}</span> <span style="color:#ca9ee6">catch</span> <span style="color:#c6d0f5">(</span><span style="color:#ca9ee6">let</span> <span style="color:#babbf1">e</span><span style="color:#c6d0f5">)</span> <span style="color:#c6d0f5">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">6</span><span>        <span style="color:#ca9ee6">return</span> <span style="color:#c6d0f5">.</span><span style="color:#babbf1">Error</span><span style="color:#c6d0f5">(</span><span style="color:#babbf1">e</span><span style="color:#c6d0f5">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">7</span><span>    <span style="color:#c6d0f5">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">8</span><span><span style="color:#c6d0f5">}</span>
</span></span></code></pre></div><p>Now I could use <code>switch</code> statements to handle my errors:</p>
<div class="highlight"><pre tabindex="0" style="color:#ef9f76;background-color:#303446;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-swift" data-lang="swift"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">1</span><span><span style="color:#ca9ee6">switch</span> <span style="color:#babbf1">readFile</span><span style="color:#c6d0f5">(</span><span style="color:#a6d189">&#34;some/file.ext&#34;</span><span style="color:#c6d0f5">)</span> <span style="color:#c6d0f5">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">2</span><span><span style="color:#ca9ee6">case</span> <span style="color:#c6d0f5">.</span><span style="color:#babbf1">Value</span><span style="color:#c6d0f5">(</span><span style="color:#ca9ee6">let</span> <span style="color:#babbf1">content</span><span style="color:#c6d0f5">):</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">3</span><span>    <span style="color:#babbf1">print</span><span style="color:#c6d0f5">(</span><span style="color:#babbf1">content</span><span style="color:#c6d0f5">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">4</span><span><span style="color:#ca9ee6">case</span> <span style="color:#c6d0f5">.</span><span style="color:#babbf1">Error</span><span style="color:#c6d0f5">(</span><span style="color:#ca9ee6">let</span> <span style="color:#babbf1">error</span><span style="color:#c6d0f5">):</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">5</span><span>    <span style="color:#babbf1">print</span><span style="color:#c6d0f5">(</span><span style="color:#babbf1">error</span><span style="color:#c6d0f5">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#774f3b">6</span><span><span style="color:#c6d0f5">}</span>
</span></span></code></pre></div><p>In future I could even extend the <code>Result</code> enum using functions like <code>map</code> or <code>flatten</code> to make handling errors even easier. I can pass the result around, confident that the type system will make sure I don&rsquo;t do anything stupid (spoiler alert: I will find a way regardless).</p>
<p>I&rsquo;m not sure if this is the most idiomatic way to handle errors in Swift, but it certainly beats <code>try/catch</code> for me.</p>

        </article>
    </main>
    <footer class="container mt-10 mb-5">
    <span class="text-xs">
        <a href="https://fixel.macpaw.com">Fixel</a> by MacPaw – <a href="https://scripts.sil.org/cms/scripts/page.php?site_id=nrsi&id=OFL">License OFL 1.1</a>,
        <a href="https://github.com/theleagueof/league-mono">LeagueMono</a> font by Tyler Finck – <a href="https://github.com/theleagueof/league-mono/blob/master/OFL.md">License OFL 1.1</a>,
        <a href="https://icons.getbootstrap.com">Bootstrap Icons</a> – <a href="https://github.com/twbs/icons/blob/main/LICENSE.md">License MIT</a>
    </span>

    <span class="block mt-3">&copy; <a href="https://github.com/RobinThrift">Robin Thrift</a> 2023</span>
</footer>

</body>
</html>
